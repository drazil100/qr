<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
img {
  width:600px;
  display:block;
  margin-left:auto;
  margin-right:auto;
}
</style>
  </head>
  <body>
    <div>
      <center>
        <a href="#generator">generator</a> | <a href="#assembly">assembly instructions</a> | <a href="#care">care instructions</a>
        <h1 id="generator">QR Code Generator</h1>
        SHP<input type="text" id="text1" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text2" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text3" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text4" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text5" maxlength="2" style="width: 20px;">01<br>
        <!-- <button onclick="generateQR()">Generate QR Codes</button> -->
        <div style="display:none;" id="qrcode1"></div>
        <div style="display:none;" id="qrcode2"></div>
        <div style="display:none;" id="qrcode3"></div>
        <div style="display:none;" id="qrcode4"></div>
        <div style="display:none;" id="qrcode5"></div>
        <button onclick="generatePDF()">Generate PDF</button>
      </center>
    </div>
    <div style="max-width:60%;margin-left:auto;margin-right:auto;">
      <center><h1 id="assembly">Assembly Instructions</h1></center>
      <ul>
        <img src="images/1.jpg">
        <li>What you need</li>
        <ul>
          <li>Access to a printer</li>
          <li>QR Code <a href="QR_Slip.zip">Slip</a> / <a href="QR_Clip.zip">Clip</a></li>
          <ul>
            <li>NOTE: If you do not have access to a 3D printer or a previous QR Slip / Clip, there are plenty of 3D printing services online that you can pay to print you one.</li>
            <li>WARNING: The clip variant's tolerances are calibrated for <a href="https://a.co/d/jbF1Q2k">this specific watch</a>. It likely won't fit other watch bands without precise adjustments. This version is only recommended if you have direct access to a 3D printer.</li>
          </ul>
          <li>Scisors</li>
          <li>Glue Stick</li>
          <li>Scrap paper or cardboard</li>
          <li>Clear Packing Tape</li>
          <li>Knife</li>
        </ul>
        <li>Generate your QR code using the form above</li>
        <ul>
          <li>Up to 5 unique QR codes may be generated at a time</li>
          <li>Each text field will generate 14 copies of the QR code</li>
          <li>You do not need to fill out every text field</li>
        </ul>
        <br><img src="images/2.jpg">
        <li>Cut out QR code</li>
        <br><img src="images/3.jpg">
        <li>Place QR code face down on scrap of cardboard and coat the back with a gluestick</li>
        <br><img src="images/4.jpg">
        <li>Stick QR code on QR Slip / Clip and let it dry for at least 5 minutes</li>
        <br><img src="images/5.jpg">
        <li>Cover QR code with clear packing tape </li>
        <br><img src="images/6.jpg">
        <li>Carefully use a sharp knife to score the edges of the tape</li>

        <ul>
        <li>DISCLAIMER: There is a risk of cutting yourself using this method. While this method produces a cleaner cut, and makes it less likely to peel, you can also just cut the edges of the tape with scisors.</li>
        </ul>

        <br><img src="images/7.jpg">
        <li>Peel away the tape</li>
        <br><img src="images/9.jpg">
        <li>Run fingernail along edges of tape to make sure there is a good seal</li>
      </ul>
    </div>
    <div style="max-width:60%;margin-left:auto;margin-right:auto;">
      <center><h1 id="care">Care Instructions</h1></center>
      <ul>
        <li>Do not leave in a hot car</li>
        <ul>
          <li>It could potentially deform in hot enough conditions.</li>
        </ul>
        <li>Avoid getting wet</li>
        <ul>
          <li>While the packing tape SHOULD protect it against water damage, I have no clue how well it will hold up in practice</li>
        </ul>
      </ul>
    </div>

    <script>
      function generateQR() {
        for (section = 1; section <= 5; section++) {
          if (document.getElementById("text" + section).value == "") {
            continue;
          }
          document.getElementById("qrcode" + section).innerHTML = "";
          new QRCode(document.getElementById("qrcode" + section), {
            text: "SHP" + document.getElementById("text" + section).value.toUpperCase() + "01",
            width: 108,
            height: 108,
            correctLevel: QRCode.CorrectLevel.Q, // Set error correction to Q for balance
            margin: 1 // Ensure 1 module border
          });
        }
      }

      function generatePDF() {
        generateQR()
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({ unit: 'mm', format: 'letter' });

        const qrSize = 16; // QR code size excluding border
        const borderSize = 1; // 1mm border
        const finalSize = qrSize + (borderSize * 2); // 18mm x 18mm total size
        const marginX = 10;
        const marginY = 10;
        const spacingX = 25; // Adjust spacing to fit 7 columns
        const spacingY = 25;
        const sectionSpacing = 5;
        const cols = 7; // Set columns to 7
        const rows = 2;
        const textOffsetX = marginX + cols * spacingX; // Position for text

        let totalRow = 0;
        let skipped = 0;
        let fName = "SHP";
        for (section = 1; section <= 5; section++) {
          const qrCanvas = document.querySelector("#qrcode" + section + " canvas");

          if (!qrCanvas || document.getElementById("text"+section).value == "") {
            skipped++;
            continue;
          }
          fName += "-" + document.getElementById("text"+section).value.toUpperCase();

          const qrDataURL = qrCanvas.toDataURL("image/png");

          for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
              let x = marginX + col * spacingX;
              let y = marginY + totalRow * spacingY + (section-1-skipped) * sectionSpacing;
              pdf.setFillColor(255, 255, 255);
              pdf.rect(x - borderSize, y - borderSize, finalSize, finalSize, 'F'); // White background border
              pdf.addImage(qrDataURL, 'PNG', x, y, qrSize, qrSize);
            }
            // Print the text next to the last column
            pdf.text("SHP" + document.getElementById("text" + section).value.toUpperCase() + "01", textOffsetX, marginY + totalRow * spacingY + (section-1-skipped) * sectionSpacing + finalSize / 2);
          totalRow++;
          }
        }
        pdf.save(fName + "-01.pdf");
      }
    </script>



</body></html>
