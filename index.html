<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <script src="index_files/qrcode.min.js"></script>
    <script src="index_files/jspdf.umd.min.js"></script>
<style>
img {
  width:600px;
  display:block;
  margin-left:auto;
  margin-right:auto;
}
</style>
  </head>
  <body>
    <div>
      <center>
        <h1>QR Code Generator</h1>
        SHP<input type="text" id="text1" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text2" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text3" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text4" maxlength="2" style="width: 20px;">01<br>
        SHP<input type="text" id="text5" maxlength="2" style="width: 20px;">01<br>
        <!-- <button onclick="generateQR()">Generate QR Codes</button> -->
        <div style="display:none;" id="qrcode1"></div>
        <div style="display:none;" id="qrcode2"></div>
        <div style="display:none;" id="qrcode3"></div>
        <div style="display:none;" id="qrcode4"></div>
        <div style="display:none;" id="qrcode5"></div>
        <button onclick="generatePDF()">Generate PDF</button>
      </center>
    </div>
    <div style="max-width:60%;margin-left:auto;margin-right:auto;">
      <ul>
        <img src="images/1.jpg">
        <li>What you need</li>
        <ul>
          <li>Access to a printer</li>
          <li>QR Code Slip / Clip</li>
          <li>Scisors</li>
          <li>Glue Stick</li>
          <li>Scrap paper / cardboard</li>
          <li>Clear Packing Tape</li>
          <li>Knife</li>
        </ul>
        <li>Generate your QR code using the form above (up to 5 different QR codes may be generated at one time)</li>
        <br><img src="images/2.jpg">
        <li>Cut out QR code</li>
        <br><img src="images/3.jpg">
        <li>Place QR code face down on scrap of cardboard and coat the back with a gluestick</li>
        <br><img src="images/4.jpg">
        <li>Stick QR code on print and let it dry for at least 5 minutes</li>
        <br><img src="images/5.jpg">
        <li>Cover QR code with clear packing tape </li>
        <br><img src="images/6.jpg">
        <li>Carefully use a sharp knife to score the edges of the tape</li>

        <ul>
        <li>DISCLAIMER: There is a real risk of slipping and cutting yourself trying to score the tape this way. While this method produces a cleaner cut, and makes it less likely to peel, you can also just cut the edges of the tape with scisors.</li>
        </ul>

        <br><img src="images/7.jpg"><img src="images/8.jpg">
        <li>Peel away the tape</li>
        <br><img src="images/9.jpg">
        <li>Run fingernail along edges of tape to make sure there is a good seal</li>
      </ul>
    </div>

    <script>
      function generateQR() {
        for (section = 1; section <= 5; section++) {
          if (document.getElementById("text" + section).value == "") {
            continue;
          }
          document.getElementById("qrcode" + section).innerHTML = "";
          new QRCode(document.getElementById("qrcode" + section), {
            text: "SHP" + document.getElementById("text" + section).value.toUpperCase() + "01",
            width: 108,
            height: 108,
            correctLevel: QRCode.CorrectLevel.Q, // Set error correction to Q for balance
            margin: 1 // Ensure 1 module border
          });
        }
      }

      function generatePDF() {
        generateQR()
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({ unit: 'mm', format: 'letter' });

        const qrSize = 16; // QR code size excluding border
        const borderSize = 1; // 1mm border
        const finalSize = qrSize + (borderSize * 2); // 18mm x 18mm total size
        const marginX = 10;
        const marginY = 10;
        const spacingX = 25; // Adjust spacing to fit 7 columns
        const spacingY = 25;
        const sectionSpacing = 5;
        const cols = 7; // Set columns to 7
        const rows = 2;
        const textOffsetX = marginX + cols * spacingX; // Position for text

        let totalRow = 0;
        let skipped = 0;
        for (section = 1; section <= 5; section++) {
          const qrCanvas = document.querySelector("#qrcode" + section + " canvas");

          if (!qrCanvas) {
            skipped++;
            continue;
          }

          const qrDataURL = qrCanvas.toDataURL("image/png");

          for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
              let x = marginX + col * spacingX;
              let y = marginY + totalRow * spacingY + (section-1-skipped) * sectionSpacing;
              pdf.setFillColor(255, 255, 255);
              pdf.rect(x - borderSize, y - borderSize, finalSize, finalSize, 'F'); // White background border
              pdf.addImage(qrDataURL, 'PNG', x, y, qrSize, qrSize);
            }
            // Print the text next to the last column
            pdf.text("SHP" + document.getElementById("text" + section).value.toUpperCase() + "01", textOffsetX, marginY + totalRow * spacingY + (section-1-skipped) * sectionSpacing + finalSize / 2);
          totalRow++;
          }
        }
        pdf.save("qrcode.pdf");
      }
    </script>



</body></html>
